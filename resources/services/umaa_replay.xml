<?xml version="1.0" encoding="UTF-8"?>

<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="https://community.rti.com/schema/current/rti_replay_service.xsd">

  <configuration_variables>
    <value>

      <!-- 
        Set up default config ENV variables after 6.1.14. 
        Override with either ENV variables i.e. "export VAR=X" or command line -DVAR=X 
      -->
      <element>
        <name>DOMAIN_ID</name>
        <value>1</value>
      </element>
    </value>
  </configuration_variables>

  <replay_service name="xcdr">

    <!--  Storage settings -->
    <storage>
      <sqlite>
        <storage_format>XCDR_AUTO</storage_format>
        <database_dir>data/xcdr</database_dir>
      </sqlite>
    </storage>

    <!-- Optionally select the begin and end times for the data to be replayed -->
    <!--data_selection>
            <time_range>
                <begin_time>
                    <sec>0</sec>
                    <nanosec>0</nanosec>
                </begin_time>
            </time_range>
        </data_selection-->

    <!-- Specify playback behavior, including what local time to start -->
    <!--playback>
        </playback-->

       
      <domain_participant name="INTERNAL-VEH1">
        <domain_id>$(DOMAIN_ID)</domain_id>
           
      </domain_participant>

    <session name="DefaultSession" default_participant_ref="INTERNAL-VEH1">
      <!-- Topics to replay in this session -->
      <topic_group name="DefaultTopicGroup">
        <!-- Topics to replay -->
        <allow_topic_name_filter>*</allow_topic_name_filter>
        <deny_topic_name_filter>rti/*</deny_topic_name_filter>

        <!-- Set Writer to use same QoS as system to ensure compatibility -->
        <datawriter_qos base_name="umaa_qos_lib::topic_assign_qos" />
      </topic_group>
      
    </session>
  </replay_service>


  <replay_service name="json">

    <!--  Storage settings -->
    <storage>
      <sqlite>
        <storage_format>JSON_SQLITE</storage_format>
        <database_dir>data/json</database_dir>
      </sqlite>
    </storage>

    <!-- Optionally select the begin and end times for the data to be replayed -->
    <!--data_selection>
            <time_range>
                <begin_time>
                    <sec>0</sec>
                    <nanosec>0</nanosec>
                </begin_time>
            </time_range>
        </data_selection-->

    <!-- Specify playback behavior, including what local time to start -->
    <!--playback>
        </playback-->


    <domain_participant name="INTERNAL-VEH1">
      <domain_id>$(DOMAIN_ID)</domain_id>

    </domain_participant>

    <session name="DefaultSession" default_participant_ref="INTERNAL-VEH1">
      <!-- Topics to replay in this session -->
      <topic_group name="DefaultTopicGroup">
        <!-- Topics to replay -->
        <allow_topic_name_filter>*</allow_topic_name_filter>
        <deny_topic_name_filter>rti/*</deny_topic_name_filter>
      </topic_group>
    </session>
  </replay_service>


</dds>